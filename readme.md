## Постановка задачи

- Разработать программную систему, осуществляющую имитационное моделирование процесса или явления и визуализирующую этот процесс или явление.
- Использовать для создания системы один из объектно-ориентированных языков программирования: С#, Object Pascal, C++, Java, Python, PHP, Ruby, Visual Basic и др., а также поддерживающие его инструментальные средства.
- Провести с помощью разработанной системы исследование поведения моделируемого процесса, задавая для этого различные значения параметров, от которых зависит этот процесс.

## Основные требования

- Система должна быть спроектирована на основе методологии объектно-ориентированного программирования, т.е. должна быть представлена в виде совокупности взаимодействующих друг с другом объектов, причем каждый объект является экземпляром определенного класса, а классы образуют иерархию. В ходе объектно-ориентированного проектирования необходимо определить и зафиксировать логическую структуру (классы и объекты) и файловую (модульную) структуру системы.
- Система должна предоставлять удобный и понятный пользовательский интерфейс, предусматривающий проведение экспериментов по моделированию и выдачу в ходе экспериментов необходимой информации.
- Для проведения экспериментов по моделированию перед началом каждого эксперимента пользователь должен иметь возможность устанавливать нужные значения параметров, от которых зависит этот процесс или явление. Такие параметры называются параметрами моделирования, обычно в их числе – шаг моделирования, т.е. отрезок времени, измеряемый в тех или иных единицах времени (секундах, минутах, часах, днях, неделях и пр.) и/или число шагов моделирования.
- Поскольку в большинстве вариантов задания моделируемый процесс или явление зависит от нескольких неопределенных факторов, следует моделировать такие факторы статистически – на основе одного из законов вероятностного распределения (равномерного, нормального и др.).

## Вариант "Система управления инвестионным портфелем"

- [x] Создаваемая система реализует экономическую игру, участник которой – менеджер, управляющий работой некоторого инвестиционного фонда. Фонд осуществляет различные вложения собранных денежных средств с целью получения прибыли. Возможны вложения в:
    - срочные депозиты банков (валютные и рублевые), 
    - в драгоценные металлы (в золотые слитки и др.), 
    - в государственные облигации, 
    - в акции предприятий.
Все эти виды вложений различаются доходностью и риском (обычно доход пропорционален риску).

- [x] В начале игры устанавливается общий капитал фонда (например, 560 тыс. у.е.), и определяется его портфель, т.е. какая часть капитала фонда куда будет вкладываться. В портфеле не обязательно присутствуют все виды вложений (например, нет вложений в депозиты, если они малодоходны), в то же время допускается несколько разных вложений одного вида (например, вкладываются разные суммы в акции разных предприятий или в депозиты одного или нескольких банков).

- [x] В начале игры определена внешняя конъюнктура – возможные в текущий момент виды вложений и их условия, к примеру, известен процент дохода по годовым депозитам некоторого банка, стоимость акций некоторой компании и их доходность и т.п.

- [x] Игра моделирует работу фонда в течение М месяцев (12≤ М ≤ 30). Шаг моделирования – один месяц, в конце каждого месяца выполняется:
    1. подсчет доходности по всем составляющим инвестиционного портфеля, определение общей суммы прибыли и процента доходности за этот месяц;
    2. выплата государству налога на доход фонда (например, 17% от суммы прибыли);
    3. учет новых поступивших денежных средств фонда (в частности, за счет продажи населению паев фонда);
    4. учет расходов фонда (например, в случае возврата паев их держателями);
    5. реструктуризация портфеля с учетом изменённой (на шагах 3 и 4) общей суммы капитала фонда и с учетом изменений во внешней конъюнктуре (например, новой стоимости акций).

- [x] Операции 1 и 2 выполняются автоматически, операция 5 – игроком-менеджером, а операции 3 и 4 могут выполняться как автоматически, так и игроком. Обычно поступление новых денежных средств в фонд (шаг 3) зависит от его доходности: чем выше доходность за месяц, тем больше спрос на паи фонда и наоборот – падение доходности влечет за собой обратную продажу (возврат) паев (шаг 4). Реструктуризация инвестиционного портфеля может включать, например, продажу части акций или покупку новых, а также вложения в новые депозиты.

- [x] При подсчете доходности фонда за месяц (шаг 1) учитывается, что доходность депозита и облигаций известна заранее, а доходность акций и драгоценных металлов определяется внешней конъюнктурой (текущей ценой). Текущую цену следует моделировать как цену прошлого месяца, скорректированную случайной величиной, изменяющейся в некотором диапазоне по определенному вероятностному закону. Аналогичным образом можно моделировать изменение процентных ставок по депозитам по окончании их срока и другие показатели внешней конъюнктуры.

- [x] Цель моделирования – выявление пропорций инвестиционного портфеля, позволяющих устойчиво получать прибыль и наращивать общий капитал инвестиционного фонда. 

- [x] В изменяемые параметры целесообразно включить число М, размер исходного капитала инвестиционного фонда, первоначальную структуру инвестиционного портфеля, процент налога на доход, а также диапазоны разброса случайных величин, от которых зависит изменение внешней конъюнктуры.

- [x] На каждом шаге игры игроку-менеджеру должны быть доступны все данные о состоянии дел инвестиционного фонда: суммарный капитал, общий доход и доход по отдельным статьям портфеля и др., а также информация о внешней конъюнктуре: цена акций, процентные ставки по депозитам и т.п. По окончании игры можно предусмотреть вывод дополнительных статистических данных о работе фонда, например, уровень продажи и возврата паев фонда.






## На данный момент реализовано

1. Объектно-ориентированная структура  
   - Все сущности (акции, облигации, металл, депозит и пр.) представлены отдельными классами-наследниками от базового `Investment`.  
   - Портфель (`Portfolio`) хранит список инвестиций, а фонд (`Fund`) оперирует капиталом, налоговой ставкой и пр.  
   - Параметры «внешней конъюнктуры» (курсы акций, ставок, металлов) инкапсулированы в классе `ExternalConj`.  

2. Гибкая система конфигурации
   - Используется `market_config.yaml` для описания доступных акций, облигаций, депозитов, металлов – со всеми изначальными параметрами.  

3. Pydantic-модели и отказ от словарей  
   - Практически все данные передаются в виде внутри Pydantic-моделей для исключения ошибок. 

4. Пошаговая симуляция
   - Шаг моделирования — один месяц. По нажатию на кнопку «Следующий месяц» вызывается метод `simulate_month()` в `Game`.  
   - Автоматически обновляются цены на активы, рассчитывается месячная прибыль/налоги, моделируется случайный приток/отток инвестиций, сохраняется статистика.

5. Интерактивное управление портфелем 
   - Пользователь в любой момент может нажать «Совершить покупку» и через удобный диалог `PurchaseDialog` поменять состав своих активов (купить/продать акции, облигации, металлы или внести средства в депозиты).  
   - При этом учитывается текущее состояние портфеля: пользователь видит, сколько уже есть каждого актива, и задаёт новое количество.

6. Графическая визуализация
   - Используются matplotlib-графики для отображения динамики капитала, размера портфеля и цен акций по месяцам.  

7. Учёт налога
   - Каждый месяц автоматически рассчитывается налог на полученную прибыль, и он вычитается из капитала.  

8. Стартовый экран  
   - При запуске приложения отображается окно, где пользователь вводит исходный капитал, ставку налога, число месяцев игры и формирует начальный портфель.  

9. Понятная многомодульная структура
   - Весь GUI разнесён по файлам.  
   - В `core` лежат основные бизнес-классы (фонд, портфель, игра, игрок, модели), а в `trading_market` – логика, связанная с настройками рынка.  


Таким образом, проект:

- Демонстрирует основные принципы объектно-ориентированного дизайна (разделение ответственности, наследование, инкапсуляция).  
- Имеет удобную конфигурационную систему (YAML + pydantic), что помогает быстро менять параметры «рынка» или добавлять новые активы.  
- Позволяет игроку в интерактивном режиме выявлять пропорций инвестиционного портфеля, позволяющие получать прибыль и наращивать общий капитал фонда. 

